<form id="myForm" action="?" method="post">
  <input type="date" id="date" required/>
  <br>
  <input type="time" id="time" required/>
  <br>
  <select id="select" required>
    <option>Certification</option>
    <option>Technical Training</option>
    <option>University Courses</option>
    <option>Certification Preparation Classes</option>
    <option>Seminars</option>
    <option>Other</option>
</select>
  <br>
  <input type="file" id="fileinput">
  <br>
  <button type="submit" id="submitButton" disabled=true>Submit</button>
</form>
<script>
  function tooLate(event){
    let curDate =  new Date();
    curDate.setHours(0,0,0,0); //Set to midnight

    let userDate = document.getElementById("date").value;
    userDate = userDate.split("-");
    userDate = new Date(userDate[0], userDate[1]-1, userDate[2], 0, 0, 0); //Months are zero-indexed

    if (userDate-curDate < 86400000*3) {//ms per day; 3 days before
      document.getElementById("submitButton").disabled=true;
    }
    else{
      document.getElementById("submitButton").disabled=false; //reenable in case it was disabled before
    }
  }
  function decoy(event){ //verify user did not change system time to allow late submission
    //event.preventDefault();
    console.log("In decoy"); //FIXME, it never goes in here
    let curDate =  new Date();
    curDate.setHours(0,0,0,0); //Set to midnight

    let userDate = document.getElementById("date").value;
    userDate = userDate.split("-");
    userDate = new Date(userDate[0], userDate[1]-1, userDate[2], 0, 0, 0); //Months are zero-indexed

    if (userDate-curDate < 86400000*3){
      document.getElementById("submitButton").disabled=true;
      alert("Sorry, this submission is too late");
      return false; //Should prevent non-javascript method of form submission
    }
    else{
      document.getElementById("myForm").submit(); //Make sure it uses POST
      return true;
    }
  }
  document.getElementById("date").addEventListener("change", tooLate, true);
  document.getElementById("submitButton").addEventListener("click", decoy, true);
</script>